---
title: "02. 동작 파라미터화 코드 전달"
excerpt: "JAVA8의 첫번째, 동작 파라미터화 입니다."
categories:
  - JAVA8
tags:
last_modified_at: 2021-05-15
---
# 동작 파라미터화
클라이언트의 요구는 정말 시도때도 없이 바뀐다  
그렇기 때문에 개발자들은 항상 그에 대응하기 위해 **구현하기 쉽고, 유지보수성이 좋은 코드를 짜야 한다.**  
이때 **동작 파라미터**를 사용하면, 자주 바뀌는 요구에 효과적으로 대응할 수 있다.  

## 동작 파라미터화란?
**동작 파라미터란 어떻게 실행할 것인지 결정하지 않은 코드 블록을 의미**. 이에 대해 가장 먼저 떠오르는 것이 `인터페이스`이다.  
**사실, 이 `인터페이스`를 떠올렸다면, 이미 80%는 먹고 들어가는것이다.**  
예제를 하나 들고와보자.

### 학생 기록부

#### 학생 기록부 V1
* 정말 원시적으로 학생의 성별을 기준으로 필터링을 해주는 메소드를 만들어 보자.
    ```java
    public static List<Student> basicStudentFilterV1(List<Student> students) {
        List<Student> result = new ArrayList<>();
        for (Student student : students) {
            if (student.getGender().equals(Gender.Male)) result.add(student);
        }
        return result;
    }
    ```
  * `For-Each`문을 통해서 전체 자료구조를 읽어서 `IF` 조건문에 해당하는 데이터만 새로운 리스트에 넣고 있다.
  * 만약 남학생이 아닌 여학생을 찾고 싶다면, 내부 코드를 고쳐야 한다.
  
#### 학생 기록부 V2 - 파라미터 추가
* 내부 코드를 고치는 대신, 메소드 파라미터로 성별값을 주면 더 좋지 않을까?
    ```java
    public static List<Student> basicStudentFilterV2(List<Student> students, Gender gender) {
        List<Student> result = new ArrayList<>();
        for (Student student : students) {
            if (student.getGender().equals(gender)) result.add(student);
        }
        return result;
    }
    ```
    * 문제점 1. 계속해서 추가 요구사항이 들어올때마다, 파라미터를 추가해주어야 한다.
        * 이는 내부 코드도 복잡해질뿐더러, 가독성도 매우 안좋아진다.
    * 문제점 2. 코드가 복잡해질수록, 재사용성이 떨어지는 것이다.
        * 좋은 코드는 재사용성이 높아야 한다.
    
#### 학생 기록부 V3 - 전략 패턴의 사용
* 이번에는 `인터페이스`를 사용해보자. `IF` 조건문에 참 거짓을 기준으로 필터링을 하는 것이기 때문에, 우리는 `boolean` 타입의 메소드를 이용하면 된다.
* 대표적으로 `boolean` 타입의 메소드를 가지는 `Predicate` 인터페이스를 이용하자.
    ```java
    public interface StudentPredicate() {
        boolean test(Student student);
    }
    ```

* 이렇게 되면 우리는 `전략 패턴`을 이용해서 수많은 요구사항에 즉각적으로 대응할 수 있다.
    ```java
    // 남학생만 필터링
    public class filterMaleStudentsStrategy() implements StudentPredicate{
        @Override
        public boolean test(Student student){
            return student.getGender().equals(Gender.Male);
        } 
    }
    ```
    ```java
    // 180cm 이상인 학생들을 필터링
    private static final int TALL = 180;
    public class filterTallStudentsStrategy() implements StudentPredicate{
        @Override
        public boolean test(Student student){
            return student.getHeight() > TALL;
        }
    }
    ```
    * 이렇게 캡슐화를 통해서 더욱 유연하고 가독성이 좋은 코드가 만들어졌다!
<br></br>
* 이제 이 코드를 어떻게 사용할지 고민해봐야 한다.
* 우리가 V2에서 했던 것을 생각해보자, 조금 더 유연성을 높이기 위해 `메소드 파라미터`로 `Gender`을 추가했다.
* 그렇다면, **이 `전략 패턴`들을 메소드 파라미터로 추가하면 되지 않을까?**
<img src="../image/JAVA8/ch2/ch2_1.png" alt="동작 파라미터화.png" class="align-center">
* 이제 원하는 조건을 구현한 클래스들을 각 필터들 파라미터에 인스턴스로 넣어주기만 하면 된다.
    ```java
    public List<Student> maleStudents = predicateFilterV1(students, new filterMaleStudentsStrategy());
    public List<Student> tallStudens = predicateFilterV1(students, new filterTallStudentsStrategy());
    ```
* **이게 바로 `동작 파라미터화` 이다.**

<img src="https://github.com/kujaHn/kujaHn.github.io/blob/master/image/JAVA8/ch2/ch2_2.png" alt="동작 매커니즘.png" class="align-center">

#### 학생 기록부 V4 - 익명클래스 적용
* 핵심 개념은 다 설명했으나, 조금 더 간략화 해보자.
* 우리가 불편한 점은, 전략 패턴 클래스들을 따로 생성을 하고, 또 인스턴스를 만들어 파라미터로 넣는 것이다.
* 이는 `익명 클래스`를 통해서 해결할 수 있다.  
  <img src="https://github.com/kujaHn/kujaHn.github.io/blob/master/image/JAVA8/ch2/ch2_3.png" alt="익명 클래스 적용.png" class="align-center">
    * `students`는 학생 리스트`(List<Student>)`이다.
    * 참고로 익명 클래스는 `이벤트 핸들러`에서 자주 쓰이는 방법이니 알아두자.

#### 학생 기록부 V5 - 리스트 형식 추상화
* 만약 `List<Student>`로 고정하는 것이 아닌 여러 리스트 타입들로 추상화를 하고 싶다면 `List<T>`를 사용하자.
    ```java
    public static <T> List<T> predicateFilterV5(List<T> list, Predicate<T> p) {
        List<T> result = new ArrayList<>();
            for (T e : list) { 
                if (p.test(e)) {
                    result.add(e); 
                }
        } 
        return result;
    }
    ```
## 정리
* **`동작 파라미터화`는 다양한 동작을 수행할 수 있도록 전략 패턴들을 메소드 인수로 전달**한다.
* `동작 파라미터화`를 이용하면 변화하는 요구사항에 더 잘 대응할 수 있는 코드를 구현할 수 있다.

### 다음장..
* 학생 기록부 V5는 더 간소화 할 수 있다. 바로 다음장에서 배울 `람다`를 통해서 말이다.
```java
public List<Student> maleStudents = predicateFilterV6(students, (Student s) -> s.getGender().equals(Gender.Male));
```

### 참고 자료
* 모던 자바 인 액션
* JAVA Reference
